{"version":3,"sources":["../../src/setValue/setValueViewModel.js"],"names":["setValueViewModel","node","context","origData","cloneDeep","data","subscribe","_setAllValues","initialData","setTimeout","dict","dictionary","Object","keys","forEach","n","_setValue","clear","id","setValue","hasOwnProperty","call","initial"],"mappings":";;;;;kBAGwBA,iB;;AAHxB;;;;AACA;;;;;;AAEe,SAASA,iBAAT,CAA2BC,IAA3B,EAAiC;AAC5C,QAAMC,UAAU,IAAhB;AAAA,QACIC,WAAW,iBAAEC,SAAF,CAAYF,QAAQG,IAAR,EAAZ,CADf;;AAGA,QAAIH,QAAQG,IAAZ,EAAkB;AACdH,gBAAQG,IAAR,CAAaC,SAAb,CAAuBC,aAAvB;AACH;;AAED,QAAIN,KAAKO,WAAT,EAAsB;AAClBC,mBAAW,YAAM;AACbF,0BAAcJ,QAAd;AACH,SAFD;AAGH;;AAED,aAASI,aAAT,CAAuBF,IAAvB,EAA6B;AACzB,YAAMK,OAAOR,QAAQS,UAAR,EAAb;AACAC,eAAOC,IAAP,CAAYH,IAAZ,EAAkBI,OAAlB,CAA0B,UAACC,CAAD,EAAO;AAC7BC,sBAAUN,KAAKK,CAAL,CAAV,EAAmBV,IAAnB,EAAyBJ,KAAKgB,KAA9B;AACH,SAFD;AAGH;AACD;AACA;AACA,aAASD,SAAT,CAAmBD,CAAnB,EAAsBV,IAAtB,EAA4BY,KAA5B,EAAmC;AAC/B,YAAIF,EAAEG,EAAF,IAAQH,EAAEI,QAAV,KAAuB,GAAGC,cAAH,CAAkBC,IAAlB,CAAuBhB,IAAvB,EAA6BU,EAAEG,EAA/B,KAAsCD,KAA7D,CAAJ,EAAyE;AACrEF,cAAEI,QAAF,CAAWd,KAAKU,EAAEG,EAAP,CAAX,EAAuB,EAAEI,SAAS,IAAX,EAAvB,EADqE,CAC1B;AAC9C;AACJ;AACJ","file":"setValueViewModel.js","sourcesContent":["import ko from 'knockout';\nimport _ from 'lodash';\n\nexport default function setValueViewModel(node) {\n    const context = this,\n        origData = _.cloneDeep(context.data());\n\n    if (context.data) {\n        context.data.subscribe(_setAllValues);\n    }\n\n    if (node.initialData) {\n        setTimeout(() => {\n            _setAllValues(origData);\n        });\n    }\n\n    function _setAllValues(data) {\n        const dict = context.dictionary();\n        Object.keys(dict).forEach((n) => {\n            _setValue(dict[n], data, node.clear);\n        });\n    }\n    // n is the descendant node we are setting\n    // n2 is a childNode of the node we are setting\n    function _setValue(n, data, clear) {\n        if (n.id && n.setValue && ({}.hasOwnProperty.call(data, n.id) || clear)) {\n            n.setValue(data[n.id], { initial: true }); // pass as object with value key?\n        }\n    }\n}"]}