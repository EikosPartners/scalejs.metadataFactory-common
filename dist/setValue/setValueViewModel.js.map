{"version":3,"sources":["../../src/setValue/setValueViewModel.js"],"names":["setValueViewModel","node","context","origData","_","cloneDeep","data","subscribe","_setAllValues","initialData","setTimeout","dict","dictionary","Object","keys","forEach","n","_setValue","clear","id","setValue","has","get","initial"],"mappings":";;;;;kBAGwBA,iB;;AAHxB;;;;AACA;;;;;;AAEe,SAASA,iBAAT,CAA2BC,IAA3B,EAAiC;AAC5C,QAAMC,UAAU,IAAhB;AAAA,QACIC,WAAWC,iBAAEC,SAAF,CAAYH,QAAQI,IAAR,EAAZ,CADf;;AAGA,QAAIJ,QAAQI,IAAZ,EAAkB;AACdJ,gBAAQI,IAAR,CAAaC,SAAb,CAAuBC,aAAvB;AACH;;AAED,QAAIP,KAAKQ,WAAT,EAAsB;AAClBC,mBAAW,YAAM;AACbF,0BAAcL,QAAd;AACH,SAFD;AAGH;;AAED,aAASK,aAAT,CAAuBF,IAAvB,EAA6B;AACzB,YAAMK,OAAOT,QAAQU,UAAR,EAAb;AACAC,eAAOC,IAAP,CAAYH,IAAZ,EAAkBI,OAAlB,CAA0B,UAACC,CAAD,EAAO;AAC7BC,sBAAUN,KAAKK,CAAL,CAAV,EAAmBV,IAAnB,EAAyBL,KAAKiB,KAA9B;AACH,SAFD;AAGH;AACD;AACA;AACA,aAASD,SAAT,CAAmBD,CAAnB,EAAsBV,IAAtB,EAA4BY,KAA5B,EAAmC;AAC/B,YAAIF,EAAEG,EAAF,IAAQH,EAAEI,QAAV,KAAuBhB,iBAAEiB,GAAF,CAAMf,IAAN,EAAYU,EAAEG,EAAd,KAAoBD,KAA3C,CAAJ,EAAuD;AACnDF,cAAEI,QAAF,CAAWhB,iBAAEkB,GAAF,CAAMhB,IAAN,EAAYU,EAAEG,EAAd,CAAX,EAA8B,EAAEI,SAAS,IAAX,EAA9B,EADmD,CACD;AACrD;AACJ;AACJ","file":"setValueViewModel.js","sourcesContent":["import ko from 'knockout';\nimport _ from 'lodash';\n\nexport default function setValueViewModel(node) {\n    const context = this,\n        origData = _.cloneDeep(context.data());\n\n    if (context.data) {\n        context.data.subscribe(_setAllValues);\n    }\n\n    if (node.initialData) {\n        setTimeout(() => {\n            _setAllValues(origData);\n        });\n    }\n\n    function _setAllValues(data) {\n        const dict = context.dictionary();\n        Object.keys(dict).forEach((n) => {\n            _setValue(dict[n], data, node.clear);\n        });\n    }\n    // n is the descendant node we are setting\n    // n2 is a childNode of the node we are setting\n    function _setValue(n, data, clear) {\n        if (n.id && n.setValue && (_.has(data, n.id)|| clear)) {\n            n.setValue(_.get(data, n.id), { initial: true }); // pass as object with value key?\n        }\n    }\n}"]}