{"version":3,"sources":["../../src/setValue/setValueViewModel.js"],"names":["setValueViewModel","node","context","origData","cloneDeep","data","subscribe","_setAllValues","initialData","setTimeout","dict","dictionary","Object","keys","forEach","n","_setValue","clear","id","setValue","hasOwnProperty","call","initial","unwrap","mappedChildNodes","n2"],"mappings":";;;;;kBAGwBA,iB;;AAHxB;;;;AACA;;;;;;AAEe,SAASA,iBAAT,CAA2BC,IAA3B,EAAiC;AAC5C,QAAMC,UAAU,IAAhB;AAAA,QACIC,WAAW,iBAAEC,SAAF,CAAYF,QAAQG,IAAR,EAAZ,CADf;;AAGA,QAAIH,QAAQG,IAAZ,EAAkB;AACdH,gBAAQG,IAAR,CAAaC,SAAb,CAAuBC,aAAvB;AACH;;AAED,QAAIN,KAAKO,WAAT,EAAsB;AAClBC,mBAAW,YAAM;AACbF,0BAAcJ,QAAd;AACH,SAFD;AAGH;;AAED,aAASI,aAAT,CAAuBF,IAAvB,EAA6B;AACzB,YAAMK,OAAOR,QAAQS,UAAR,EAAb;AACAC,eAAOC,IAAP,CAAYH,IAAZ,EAAkBI,OAAlB,CAA0B,UAACC,CAAD,EAAO;AAC7BC,sBAAUN,KAAKK,CAAL,CAAV,EAAmBV,IAAnB,EAAyBJ,KAAKgB,KAA9B;AACH,SAFD;AAGH;AACD;AACA;AACA,aAASD,SAAT,CAAmBD,CAAnB,EAAsBV,IAAtB,EAA4BY,KAA5B,EAAmC;AAC/B,YAAIF,EAAEG,EAAF,IAAQH,EAAEI,QAAV,KAAuB,GAAGC,cAAH,CAAkBC,IAAlB,CAAuBhB,IAAvB,EAA6BU,EAAEG,EAA/B,KAAsCD,KAA7D,CAAJ,EAAyE;AACrEF,cAAEI,QAAF,CAAWd,KAAKU,EAAEG,EAAP,CAAX,EAAuB,EAAEI,SAAS,IAAX,EAAvB,EADqE,CAC1B;AAC9C;AACD,SAAC,mBAAGC,MAAH,CAAUR,EAAES,gBAAZ,KAAiC,EAAlC,EAAsCV,OAAtC,CAA8C,UAACW,EAAD,EAAQ;AAClDT,sBAAUS,EAAV,EAAcpB,IAAd,EAAoBY,KAApB;AACH,SAFD;AAGH;AACJ","file":"setValueViewModel.js","sourcesContent":["import ko from 'knockout';\r\nimport _ from 'lodash';\r\n\r\nexport default function setValueViewModel(node) {\r\n    const context = this,\r\n        origData = _.cloneDeep(context.data());\r\n\r\n    if (context.data) {\r\n        context.data.subscribe(_setAllValues);\r\n    }\r\n\r\n    if (node.initialData) {\r\n        setTimeout(() => {\r\n            _setAllValues(origData);\r\n        });\r\n    }\r\n\r\n    function _setAllValues(data) {\r\n        const dict = context.dictionary();\r\n        Object.keys(dict).forEach((n) => {\r\n            _setValue(dict[n], data, node.clear);\r\n        });\r\n    }\r\n    // n is the descendant node we are setting\r\n    // n2 is a childNode of the node we are setting\r\n    function _setValue(n, data, clear) {\r\n        if (n.id && n.setValue && ({}.hasOwnProperty.call(data, n.id) || clear)) {\r\n            n.setValue(data[n.id], { initial: true }); // pass as object with value key?\r\n        }\r\n        (ko.unwrap(n.mappedChildNodes) || []).forEach((n2) => {\r\n            _setValue(n2, data, clear);\r\n        });\r\n    }\r\n}"]}