{"version":3,"sources":["../../src/grid/gridBindings.js"],"names":["grid","options","clientSearch","caseInsen","caseInsensitive","gridSettings","dom","rows","columns","data","paging","fixedHeader","infiniteScroll","infinite","scrollElement","hasChildren","query","sendQuery","searching","ordering","sort","responsive","select","style","blurable","items","className","selectedItem","registry","basicSearch","search","advancedSearch","filters","css","gridClasses","dataTables","styles","loader","inProgress","if","footer","visible","hide","ko","unwrap","display","gridDisplay","ctx","undefined","id","filter","gridHeaderItems","item","filterIsVisible","length","visibleFilter","gridHeaderClasses","classes"],"mappings":";;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;;;;;kBAEe;AACfA,UAAM,gBAAY;AACV,YAAMC,UAAU,KAAKA,OAArB;AAAA,YACIC,eAAeD,QAAQC,YAD3B;AAAA,YAEIC,YAAY,KAAKC,eAFrB;AAAA,YAGIC,eAAe;AACXC,iBAAK,GADM;AAEXC,kBAAM,KAAKA,IAFA;AAGXC,qBAAS,KAAKA,OAHH;AAIXC,kBAAM,KAAKA,IAJA;AAKXC,oBAAQ,KALG;AAMXC,yBAAaV,QAAQU,WANV;AAOXC,4BAAgBX,QAAQY,QAPb;AAQXC,2BAAeb,QAAQa,aARZ;AASXC,yBAAad,QAAQc,WATV;AAUXC,mBAAO,KAAKC,SAVD;AAWXC,uBAAWhB,YAXA;AAYXiB,sBAAU,KAZC;AAaXC,kBAAM,KAAKA,IAbA;AAcXC,wBAAY,IAdD,EAcO;AAClBC,oBAAQ;AACJC,uBAAO,QADH;AAEJC,0BAAU,IAFN;AAGJC,uBAAO,MAHH;AAIJC,2BAAW,WAJP;AAKJC,8BAAc,KAAKA;AALf,aAfG;AAsBXC;AAtBW,SAHnB;;AA4BA,YAAI1B,YAAJ,EAAkB;AACdG,yBAAaH,YAAb,GAA4B;AACxB2B,6BAAa,KAAKC,MADM;AAExBC,gCAAgB,KAAKC,OAFG;AAGxB7B;AAHwB,aAA5B;AAKAE,yBAAac,QAAb,GAAwB,IAAxB;AACH;;AAED,eAAO;AACHc,iBAAK,KAAKC,WADP;AAEHC,wBAAY9B;;AAFT,SAAP;AAKH,KA5CU;AA6CX,mBAAe,sBAAY;AACvB,YAAM+B,SAAS,KAAKC,MAAL,CAAYC,UAAZ,KAA2B,QAA3B,GAAsC,EAArD;AACA,eAAO;AACHL,iBAAKG;AADF,SAAP;AAGH,KAlDU;AAmDX,mBAAe,sBAAY;AACvB,eAAO;AACHG,gBAAI,KAAKC,MAAL,IAAe,KAAKH,MAAL,CAAYI,OAAZ,EADhB;AAEHR,iBAAK;AACDS,sBAAM,CAAEC,GAAGC,MAAH,CAAU,KAAKP,MAAL,CAAYI,OAAtB;AADP;AAFF,SAAP;AAMH,KA1DU;AA2DX,oBAAgB,uBAAY;AACxB,YAAMI,UAAU,KAAK5C,OAAL,CAAa6C,WAA7B;AAAA,YACIC,MAAM,IADV;AAAA,YAEIN,UAAUI,YAAYG,SAAZ,GAAwB,IAAxB,GACV,uBAASH,OAAT,EAAkB;AAAA,mBAAME,IAAIE,EAAJ,CAAN;AAAA,SAAlB,CAHJ;AAIA,eAAO;AACHhB,iBAAK;AACDS,sBAAM,CAACD;AADN;AADF,SAAP;AAKH,KArEU;AAsEX,mBAAe,sBAAY;AACvB,YAAMS,SAAS,CAAC,KAAKC,eAAL,IAAwB,EAAzB,EAA6BD,MAA7B,CAAoC;AAAA,mBAAQE,QAAQA,KAAKC,eAArB;AAAA,SAApC,EAA0E,CAA1E,CAAf;AACA,eAAO;AACHpB;AACIS,sBAAM,CAAC,KAAKS,eAAL,CAAqBG,MADhC;AAEIC,+BAAeL,UAAUA,OAAOG;AAFpC,eAIK,KAAKG,iBAJV,EAI8B,KAAKA,iBAJnC;AADG,SAAP;AAQH,KAhFU;AAiFX,oBAAgB,uBAAY;AAAA;;AACxB;AACA,YAAMN,SAAS,CAAC,KAAKC,eAAL,IAAwB,EAAzB,EAA6BD,MAA7B,CAAoC;AAAA,mBAAQE,QAAQA,KAAKC,eAArB;AAAA,SAApC,EAA0E,CAA1E,CAAf;AACA,eAAO;AACHpB,qDACK,KAAKwB,OADV,EACoB,KAAKA,OADzB,2CAEmBP,UAAUA,OAAOG,eAFpC;AADG,SAAP;AAMH;AA1FU,C","file":"gridBindings.js","sourcesContent":["import { evaluate } from 'scalejs.expression-jsep';\nimport 'datatables.net-fixedheader';\nimport 'datatables.net-select';\nimport 'datatables.net-responsive';\nimport registry from './registry/gridRegistry';\n\nexport default {\ngrid: function () {\n        const options = this.options,\n            clientSearch = options.clientSearch,\n            caseInsen = this.caseInsensitive,\n            gridSettings = {\n                dom: 't',\n                rows: this.rows,\n                columns: this.columns,\n                data: this.data,\n                paging: false,\n                fixedHeader: options.fixedHeader,\n                infiniteScroll: options.infinite,\n                scrollElement: options.scrollElement,\n                hasChildren: options.hasChildren,\n                query: this.sendQuery,\n                searching: clientSearch,\n                ordering: false,\n                sort: this.sort,\n                responsive: true, // todo: get this working\n                select: {\n                    style: 'single',\n                    blurable: true,\n                    items: 'cell',\n                    className: 'highlight',\n                    selectedItem: this.selectedItem\n                },\n                registry\n            };\n\n        if (clientSearch) {\n            gridSettings.clientSearch = {\n                basicSearch: this.search,\n                advancedSearch: this.filters,\n                caseInsen\n            };\n            gridSettings.ordering = true;\n        }\n\n        return {\n            css: this.gridClasses,\n            dataTables: gridSettings\n\n        };\n    },\n    'grid-loader': function () {\n        const styles = this.loader.inProgress() ? 'active' : '';\n        return {\n            css: styles\n        };\n    },\n    'grid-footer': function () {\n        return {\n            if: this.footer && this.loader.visible(),\n            css: {\n                hide: !(ko.unwrap(this.loader.visible))\n            }\n        };\n    },\n    'grid-display': function () {\n        const display = this.options.gridDisplay,\n            ctx = this,\n            visible = display === undefined ? true :\n            evaluate(display, id => ctx[id]);\n        return {\n            css: {\n                hide: !visible\n            }\n        };\n    },\n    'grid-header': function () {\n        const filter = (this.gridHeaderItems || []).filter(item => item && item.filterIsVisible)[0];\n        return {\n            css: {\n                hide: !this.gridHeaderItems.length,\n                visibleFilter: filter && filter.filterIsVisible,\n                // only apply grid header classes if they are defined\n                [this.gridHeaderClasses]: this.gridHeaderClasses\n            }\n        };\n    },\n    'grid-wrapper': function () {\n        // TODO: move to templates, too specific\n        const filter = (this.gridHeaderItems || []).filter(item => item && item.filterIsVisible)[0];\n        return {\n            css: {\n                [this.classes]: this.classes,\n                visibleFilter: filter && filter.filterIsVisible\n            }\n        };\n    }\n};"]}