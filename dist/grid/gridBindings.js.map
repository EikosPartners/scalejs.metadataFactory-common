{"version":3,"sources":["../../src/grid/gridBindings.js"],"names":["grid","options","clientSearch","caseInsen","caseInsensitive","gridSettings","dom","rows","columns","data","paging","fixedHeader","infiniteScroll","infinite","scrollElement","hasChildren","query","sendQuery","searching","ordering","sort","responsive","select","style","blurable","items","className","selectedItem","registry","basicSearch","search","advancedSearch","filters","css","gridClasses","dataTables","styles","loader","inProgress","if","footer","visible","hide","ko","unwrap","display","gridDisplay","ctx","undefined","id","filter","gridHeaderItems","item","filterIsVisible","length","visibleFilter","gridHeaderClasses","classes"],"mappings":";;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;;;;;kBAEe;AACfA,UAAM,gBAAY;AACV,YAAMC,UAAU,KAAKA,OAArB;AAAA,YACIC,eAAeD,QAAQC,YAD3B;AAAA,YAEIC,YAAY,KAAKC,eAFrB;AAAA,YAGIC,eAAe;AACXC,iBAAK,GADM;AAEXC,kBAAM,KAAKA,IAFA;AAGXC,qBAAS,KAAKA,OAHH;AAIXC,kBAAM,KAAKA,IAJA;AAKXC,oBAAQ,KALG;AAMXC,yBAAaV,QAAQU,WANV;AAOXC,4BAAgBX,QAAQY,QAPb;AAQXC,2BAAeb,QAAQa,aARZ;AASXC,yBAAad,QAAQc,WATV;AAUXC,mBAAO,KAAKC,SAVD;AAWXC,uBAAWhB,YAXA;AAYXiB,sBAAU,KAZC;AAaXC,kBAAM,KAAKA,IAbA;AAcXC,wBAAY,IAdD,EAcO;AAClBC,oBAAQ;AACJC,uBAAO,QADH;AAEJC,0BAAU,IAFN;AAGJC,uBAAO,MAHH;AAIJC,2BAAW,WAJP;AAKJC,8BAAc,KAAKA;AALf,aAfG;AAsBXC;AAtBW,SAHnB;;AA4BA,YAAI1B,YAAJ,EAAkB;AACdG,yBAAaH,YAAb,GAA4B;AACxB2B,6BAAa,KAAKC,MADM;AAExBC,gCAAgB,KAAKC,OAFG;AAGxB7B;AAHwB,aAA5B;AAKAE,yBAAac,QAAb,GAAwB,IAAxB;AACH;;AAED,eAAO;AACHc,iBAAK,KAAKC,WADP;AAEHC,wBAAY9B;;AAFT,SAAP;AAKH,KA5CU;AA6CX,mBAAe,sBAAY;AACvB,YAAM+B,SAAS,KAAKC,MAAL,CAAYC,UAAZ,KAA2B,QAA3B,GAAsC,EAArD;AACA,eAAO;AACHL,iBAAKG;AADF,SAAP;AAGH,KAlDU;AAmDX,mBAAe,sBAAY;AACvB,eAAO;AACHG,gBAAI,KAAKC,MAAL,IAAe,KAAKH,MAAL,CAAYI,OAAZ,EADhB;AAEHR,iBAAK;AACDS,sBAAM,CAAEC,GAAGC,MAAH,CAAU,KAAKP,MAAL,CAAYI,OAAtB;AADP;AAFF,SAAP;AAMH,KA1DU;AA2DX,oBAAgB,uBAAY;AACxB,YAAMI,UAAU,KAAK5C,OAAL,CAAa6C,WAA7B;AAAA,YACIC,MAAM,IADV;AAAA,YAEIN,UAAUI,YAAYG,SAAZ,GAAwB,IAAxB,GACV,uBAASH,OAAT,EAAkB;AAAA,mBAAME,IAAIE,EAAJ,CAAN;AAAA,SAAlB,CAHJ;AAIA,eAAO;AACHhB,iBAAK;AACDS,sBAAM,CAACD;AADN;AADF,SAAP;AAKH,KArEU;AAsEX,mBAAe,sBAAY;AACvB,YAAMS,SAAS,CAAC,KAAKC,eAAL,IAAwB,EAAzB,EAA6BD,MAA7B,CAAoC;AAAA,mBAAQE,QAAQA,KAAKC,eAArB;AAAA,SAApC,EAA0E,CAA1E,CAAf;AACA,eAAO;AACHpB;AACIS,sBAAM,CAAC,KAAKS,eAAL,CAAqBG,MADhC;AAEIC,+BAAeL,UAAUA,OAAOG;AAFpC,eAIK,KAAKG,iBAJV,EAI8B,KAAKA,iBAJnC;AADG,SAAP;AAQH,KAhFU;AAiFX,oBAAgB,uBAAY;AAAA;;AACxB;AACA,YAAMN,SAAS,CAAC,KAAKC,eAAL,IAAwB,EAAzB,EAA6BD,MAA7B,CAAoC;AAAA,mBAAQE,QAAQA,KAAKC,eAArB;AAAA,SAApC,EAA0E,CAA1E,CAAf;AACA,eAAO;AACHpB,qDACK,KAAKwB,OADV,EACoB,KAAKA,OADzB,2CAEmBP,UAAUA,OAAOG,eAFpC;AADG,SAAP;AAMH;AA1FU,C","file":"gridBindings.js","sourcesContent":["import { evaluate } from 'scalejs.expression-jsep';\r\nimport 'datatables.net-fixedheader';\r\nimport 'datatables.net-select';\r\nimport 'datatables.net-responsive';\r\nimport registry from './registry/gridRegistry';\r\n\r\nexport default {\r\ngrid: function () {\r\n        const options = this.options,\r\n            clientSearch = options.clientSearch,\r\n            caseInsen = this.caseInsensitive,\r\n            gridSettings = {\r\n                dom: 't',\r\n                rows: this.rows,\r\n                columns: this.columns,\r\n                data: this.data,\r\n                paging: false,\r\n                fixedHeader: options.fixedHeader,\r\n                infiniteScroll: options.infinite,\r\n                scrollElement: options.scrollElement,\r\n                hasChildren: options.hasChildren,\r\n                query: this.sendQuery,\r\n                searching: clientSearch,\r\n                ordering: false,\r\n                sort: this.sort,\r\n                responsive: true, // todo: get this working\r\n                select: {\r\n                    style: 'single',\r\n                    blurable: true,\r\n                    items: 'cell',\r\n                    className: 'highlight',\r\n                    selectedItem: this.selectedItem\r\n                },\r\n                registry\r\n            };\r\n\r\n        if (clientSearch) {\r\n            gridSettings.clientSearch = {\r\n                basicSearch: this.search,\r\n                advancedSearch: this.filters,\r\n                caseInsen\r\n            };\r\n            gridSettings.ordering = true;\r\n        }\r\n\r\n        return {\r\n            css: this.gridClasses,\r\n            dataTables: gridSettings\r\n\r\n        };\r\n    },\r\n    'grid-loader': function () {\r\n        const styles = this.loader.inProgress() ? 'active' : '';\r\n        return {\r\n            css: styles\r\n        };\r\n    },\r\n    'grid-footer': function () {\r\n        return {\r\n            if: this.footer && this.loader.visible(),\r\n            css: {\r\n                hide: !(ko.unwrap(this.loader.visible))\r\n            }\r\n        };\r\n    },\r\n    'grid-display': function () {\r\n        const display = this.options.gridDisplay,\r\n            ctx = this,\r\n            visible = display === undefined ? true :\r\n            evaluate(display, id => ctx[id]);\r\n        return {\r\n            css: {\r\n                hide: !visible\r\n            }\r\n        };\r\n    },\r\n    'grid-header': function () {\r\n        const filter = (this.gridHeaderItems || []).filter(item => item && item.filterIsVisible)[0];\r\n        return {\r\n            css: {\r\n                hide: !this.gridHeaderItems.length,\r\n                visibleFilter: filter && filter.filterIsVisible,\r\n                // only apply grid header classes if they are defined\r\n                [this.gridHeaderClasses]: this.gridHeaderClasses\r\n            }\r\n        };\r\n    },\r\n    'grid-wrapper': function () {\r\n        // TODO: move to templates, too specific\r\n        const filter = (this.gridHeaderItems || []).filter(item => item && item.filterIsVisible)[0];\r\n        return {\r\n            css: {\r\n                [this.classes]: this.classes,\r\n                visibleFilter: filter && filter.filterIsVisible\r\n            }\r\n        };\r\n    }\r\n};"]}