{"version":3,"sources":["../../../src/action/actions/redirect.js"],"names":["redirect","options","target","console","error","data","url","params","paramsKey","render","window","location","replace"],"mappings":";;AAAA;;AACA;;AACA;;AACA;;;;;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA,SAASA,QAAT,CAAkBC,OAAlB,EAA2B;AACvB,QAAI,CAACA,QAAQC,MAAb,EAAqB;AACjBC,gBAAQC,KAAR,CAAc,sBAAd;AACA;AACH;;AAED,QAAIC,OAAO,sBAAOJ,QAAQI,IAAR,IAAiB,QAAQ,KAAKA,IAArC,CAAX;AAAA,QACIC,YADJ;;AAGA,QAAIL,QAAQM,MAAR,IAAkBN,QAAQO,SAA9B,EAAyC;AACrCH,eAAO,oBAAMA,IAAN,EAAYJ,QAAQA,QAAQO,SAAhB,CAAZ,CAAP;AACH;;AAEDF,UAAM,mBAASG,MAAT,CAAgBR,QAAQC,MAAxB,EAAgCG,IAAhC,CAAN;;AAEAK,WAAOC,QAAP,CAAgBC,OAAhB,CAAwBN,GAAxB;AACH;AACD,mCAAgB,EAAEN,kBAAF,EAAhB","file":"redirect.js","sourcesContent":["import { registerActions } from '../actionModule';\r\nimport { unwrap } from 'knockout';\r\nimport { merge } from 'scalejs';\r\nimport mustache from 'mustache';\r\n\r\n/**\r\n * Redirect action to redirect the current page to another\r\n *\r\n * @module redirect\r\n *\r\n * @param {object} node\r\n *  The configuration object for the redirect action\r\n * @param {string} node.type='action'\r\n *  The type of the node is action\r\n * @param {string} node.actionType='redirect'\r\n *  The actionType of the node is redirect\r\n * @param {string} node.text\r\n *  The text to display on the button\r\n * @param {object} node.options\r\n *  The options pertaining to the redirect action\r\n * @param {string} node.options.target\r\n *  The url to redirect to\r\n * @param {object} node.options.data\r\n *  The data to mustache render the target url with\r\n * @param {object} node.options.params\r\n *  Key-value pairs to merge pass along as data when redirecting\r\n * @param {string} node.options.paramsKey\r\n *  The key of the data for the parameters\r\n *\r\n * @example\r\n * {\r\n *     \"type\": \"action\",\r\n *     \"actionType\": \"redirect\",\r\n *     \"text\": \"Redirect\",\r\n *     \"options\": {\r\n *         \"target\": \"https://www.google.com\"\r\n *     }\r\n * }\r\n */\r\nfunction redirect(options) {\r\n    if (!options.target) {\r\n        console.error('Must provide target!');\r\n        return;\r\n    }\r\n\r\n    let data = unwrap(options.data || (this && this.data)),\r\n        url;\r\n\r\n    if (options.params && options.paramsKey) {\r\n        data = merge(data, options[options.paramsKey]);\r\n    }\r\n\r\n    url = mustache.render(options.target, data);\r\n\r\n    window.location.replace(url);\r\n}\r\nregisterActions({ redirect });\r\n"]}