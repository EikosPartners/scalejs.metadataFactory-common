{"version":3,"sources":["../../../src/action/actions/route.js"],"names":["renderParams","params","data","ret","JSON","parse","render","stringify","ex","console","error","route","options","paramsKey","undefined","target"],"mappings":";;AAAA;;AACA;;AACA;;AACA;;;;AAEA;;;;AAEA,SAASA,YAAT,CAAsBC,MAAtB,EAA8BC,IAA9B,EAAoC;AAChC,QAAIC,MAAMF,MAAV;AACA,QAAI;AACAE,cAAMC,KAAKC,KAAL,CACF,mBAASC,MAAT,CAAgBF,KAAKG,SAAL,CAAeN,MAAf,CAAhB,EAAwCC,IAAxC,CADE,CAAN;AAGH,KAJD,CAIE,OAAOM,EAAP,EAAW;AACTC,gBAAQC,KAAR,CAAc,uCAAd,EAAuDF,EAAvD;AACH;AACD,WAAOL,GAAP;AACH;;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA,SAASQ,KAAT,CAAeC,OAAf,EAAwB;AACpB,QAAIV,OAAO,sBAAOU,QAAQV,IAAR,IAAiB,QAAQ,KAAKA,IAArC,CAAX;AAAA,QACID,eADJ;;AAGA,QAAIW,QAAQX,MAAR,IAAkBW,QAAQC,SAA9B,EAAyC;AACrCX,eAAO,qBAAMA,IAAN,EAAYU,QAAQA,QAAQC,SAAhB,CAAZ,CAAP;AACH;;AAEDZ,aAASW,QAAQX,MAAR,GAAiBD,aAAaY,QAAQX,MAArB,EAA6BC,IAA7B,CAAjB,GAAsDY,SAA/D;;AAEA,2BAAS,sBAAOF,QAAQG,MAAf,CAAT,EAAiCd,MAAjC;AACH;;AAED,mCAAgB,EAAEU,YAAF,EAAhB","file":"route.js","sourcesContent":["import { setRoute } from 'scalejs.navigation';\r\nimport { unwrap } from 'knockout';\r\nimport { merge } from 'scalejs';\r\nimport mustache from 'mustache';\r\n\r\nimport { registerActions } from '../actionModule';\r\n\r\nfunction renderParams(params, data) {\r\n    let ret = params;\r\n    try {\r\n        ret = JSON.parse(\r\n            mustache.render(JSON.stringify(params), data)\r\n        );\r\n    } catch (ex) {\r\n        console.error('Unable to JSON parse/stringify params', ex);\r\n    }\r\n    return ret;\r\n}\r\n\r\n/**\r\n * Route action to re-route to another page\r\n *\r\n * @module route\r\n *\r\n * @param {object} node\r\n *  The configuration object for the route action\r\n * @param {string} node.type='action'\r\n *  The type of the node is action\r\n * @param {string} node.actionType='route'\r\n *  The actionType of the node is route\r\n * @param {string} node.text\r\n *  The text to display on the button\r\n * @param {object} node.options\r\n *  The options pertaining to the route action\r\n * @param {string} node.options.target\r\n *  The uri to route to\r\n * @param {object} node.options.data\r\n *  The data to send along when routing\r\n * @param {object} node.options.params\r\n *  Key-value pairs to merge pass along as data when routing\r\n * @param {string} node.options.paramsKey\r\n *  The key of the data for the parameters\r\n *\r\n * @example\r\n * {\r\n *     \"type\": \"action\",\r\n *     \"actionType\": \"route\",\r\n *     \"text\": \"Add User\",\r\n *     \"options\": {\r\n *         \"target\": \"add-user\"\r\n *     }\r\n *  }\r\n */\r\nfunction route(options) {\r\n    let data = unwrap(options.data || (this && this.data)),\r\n        params;\r\n\r\n    if (options.params && options.paramsKey) {\r\n        data = merge(data, options[options.paramsKey]);\r\n    }\r\n\r\n    params = options.params ? renderParams(options.params, data) : undefined;\r\n\r\n    setRoute(unwrap(options.target), params);\r\n}\r\n\r\nregisterActions({ route });"]}