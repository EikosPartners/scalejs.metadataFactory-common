{"version":3,"sources":["../../../src/action/actions/route.js"],"names":[],"mappings":";;AAAA;;AACA;;;;AACA;;AACA;;;;AAGA;;;;AAEA,SAAS,YAAT,CAAsB,MAAtB,EAA8B,IAA9B,EAAoC;AAChC,QAAI,MAAM,MAAV;AACA,QAAI;AACA,cAAM,KAAK,KAAL,CACF,mBAAS,MAAT,CAAgB,KAAK,SAAL,CAAe,MAAf,CAAhB,EAAwC,IAAxC,CADE,CAAN;AAGH,KAJD,CAIE,OAAO,EAAP,EAAW;AACT,gBAAQ,KAAR,CAAc,uCAAd,EAAuD,EAAvD;AACH;AACD,WAAO,GAAP;AACH;;AAED,SAAS,KAAT,CAAe,OAAf,EAAwB;AACpB,QAAI,OAAO,sBAAO,QAAQ,IAAR,IAAiB,QAAQ,KAAK,IAArC,CAAX;AAAA,QACI,eADJ;AAEA,QAAI,QAAQ,MAAR,IAAkB,QAAQ,SAA9B,EAAyC;AACrC,eAAO,qBAAM,IAAN,EAAY,QAAQ,QAAQ,SAAhB,CAAZ,CAAP;AACH;AACD,aAAS,QAAQ,MAAR,GAAiB,aAAa,QAAQ,MAArB,EAA6B,IAA7B,CAAjB,GAAsD,SAA/D;;AAEA,2BAAS,sBAAO,QAAQ,MAAf,CAAT,EAAiC,MAAjC;AACH;;AAED,mCAAgB,EAAE,YAAF,EAAhB","file":"route.js","sourcesContent":["import { setRoute } from 'scalejs.navigation';\r\nimport { unwrap } from 'knockout';\r\nimport { merge } from 'scalejs';\r\nimport mustache from 'mustache';\r\nimport ko from 'knockout';\r\n\r\nimport { registerActions } from '../actionModule';\r\n\r\nfunction renderParams(params, data) {\r\n    let ret = params;\r\n    try {\r\n        ret = JSON.parse(\r\n            mustache.render(JSON.stringify(params), data)\r\n        );\r\n    } catch (ex) {\r\n        console.error('Unable to JSON parse/stringify params', ex);\r\n    }\r\n    return ret;\r\n}\r\n\r\nfunction route(options) {\r\n    let data = unwrap(options.data || (this && this.data)),\r\n        params;\r\n    if (options.params && options.paramsKey) {\r\n        data = merge(data, options[options.paramsKey]);\r\n    }\r\n    params = options.params ? renderParams(options.params, data) : undefined;\r\n\r\n    setRoute(unwrap(options.target), params);\r\n}\r\n\r\nregisterActions({ route });"]}