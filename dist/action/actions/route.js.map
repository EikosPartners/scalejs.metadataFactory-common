{"version":3,"sources":["../../../src/action/actions/route.js"],"names":["renderParams","params","data","ret","JSON","parse","render","stringify","ex","console","error","route","options","paramsKey","undefined","target"],"mappings":";;AAAA;;AACA;;;;AACA;;AACA;;;;AAGA;;;;AAEA,SAASA,YAAT,CAAsBC,MAAtB,EAA8BC,IAA9B,EAAoC;AAChC,QAAIC,MAAMF,MAAV;AACA,QAAI;AACAE,cAAMC,KAAKC,KAAL,CACF,mBAASC,MAAT,CAAgBF,KAAKG,SAAL,CAAeN,MAAf,CAAhB,EAAwCC,IAAxC,CADE,CAAN;AAGH,KAJD,CAIE,OAAOM,EAAP,EAAW;AACTC,gBAAQC,KAAR,CAAc,uCAAd,EAAuDF,EAAvD;AACH;AACD,WAAOL,GAAP;AACH;;AAED,SAASQ,KAAT,CAAeC,OAAf,EAAwB;AACpB,QAAIV,OAAO,sBAAOU,QAAQV,IAAR,IAAiB,QAAQ,KAAKA,IAArC,CAAX;AAAA,QACID,eADJ;AAEA,QAAIW,QAAQX,MAAR,IAAkBW,QAAQC,SAA9B,EAAyC;AACrCX,eAAO,qBAAMA,IAAN,EAAYU,QAAQA,QAAQC,SAAhB,CAAZ,CAAP;AACH;AACDZ,aAASW,QAAQX,MAAR,GAAiBD,aAAaY,QAAQX,MAArB,EAA6BC,IAA7B,CAAjB,GAAsDY,SAA/D;;AAEA,2BAAS,sBAAOF,QAAQG,MAAf,CAAT,EAAiCd,MAAjC;AACH;;AAED,mCAAgB,EAAEU,YAAF,EAAhB","file":"route.js","sourcesContent":["import { setRoute } from 'scalejs.navigation';\nimport { unwrap } from 'knockout';\nimport { merge } from 'scalejs';\nimport mustache from 'mustache';\nimport ko from 'knockout';\n\nimport { registerActions } from '../actionModule';\n\nfunction renderParams(params, data) {\n    let ret = params;\n    try {\n        ret = JSON.parse(\n            mustache.render(JSON.stringify(params), data)\n        );\n    } catch (ex) {\n        console.error('Unable to JSON parse/stringify params', ex);\n    }\n    return ret;\n}\n\nfunction route(options) {\n    let data = unwrap(options.data || (this && this.data)),\n        params;\n    if (options.params && options.paramsKey) {\n        data = merge(data, options[options.paramsKey]);\n    }\n    params = options.params ? renderParams(options.params, data) : undefined;\n\n    setRoute(unwrap(options.target), params);\n}\n\nregisterActions({ route });"]}