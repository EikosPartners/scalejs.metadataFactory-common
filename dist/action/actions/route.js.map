{"version":3,"sources":["../../../src/action/actions/route.js"],"names":["renderParams","params","data","ret","JSON","parse","render","stringify","ex","console","error","route","options","paramsKey","undefined","target"],"mappings":";;AAAA;;AACA;;;;AACA;;AACA;;;;AAGA;;;;AAEA,SAASA,YAAT,CAAsBC,MAAtB,EAA8BC,IAA9B,EAAoC;AAChC,QAAIC,MAAMF,MAAV;AACA,QAAI;AACAE,cAAMC,KAAKC,KAAL,CACF,mBAASC,MAAT,CAAgBF,KAAKG,SAAL,CAAeN,MAAf,CAAhB,EAAwCC,IAAxC,CADE,CAAN;AAGH,KAJD,CAIE,OAAOM,EAAP,EAAW;AACTC,gBAAQC,KAAR,CAAc,uCAAd,EAAuDF,EAAvD;AACH;AACD,WAAOL,GAAP;AACH;;AAED,SAASQ,KAAT,CAAeC,OAAf,EAAwB;AACpB,QAAIV,OAAO,sBAAOU,QAAQV,IAAR,IAAiB,QAAQ,KAAKA,IAArC,CAAX;AAAA,QACID,eADJ;AAEA,QAAIW,QAAQX,MAAR,IAAkBW,QAAQC,SAA9B,EAAyC;AACrCX,eAAO,qBAAMA,IAAN,EAAYU,QAAQA,QAAQC,SAAhB,CAAZ,CAAP;AACH;AACDZ,aAASW,QAAQX,MAAR,GAAiBD,aAAaY,QAAQX,MAArB,EAA6BC,IAA7B,CAAjB,GAAsDY,SAA/D;;AAEA,2BAAS,sBAAOF,QAAQG,MAAf,CAAT,EAAiCd,MAAjC;AACH;;AAED,mCAAgB,EAAEU,YAAF,EAAhB","file":"route.js","sourcesContent":["import { setRoute } from 'scalejs.navigation';\r\nimport { unwrap } from 'knockout';\r\nimport { merge } from 'scalejs';\r\nimport mustache from 'mustache';\r\nimport ko from 'knockout';\r\n\r\nimport { registerActions } from '../actionModule';\r\n\r\nfunction renderParams(params, data) {\r\n    let ret = params;\r\n    try {\r\n        ret = JSON.parse(\r\n            mustache.render(JSON.stringify(params), data)\r\n        );\r\n    } catch (ex) {\r\n        console.error('Unable to JSON parse/stringify params', ex);\r\n    }\r\n    return ret;\r\n}\r\n\r\nfunction route(options) {\r\n    let data = unwrap(options.data || (this && this.data)),\r\n        params;\r\n    if (options.params && options.paramsKey) {\r\n        data = merge(data, options[options.paramsKey]);\r\n    }\r\n    params = options.params ? renderParams(options.params, data) : undefined;\r\n\r\n    setRoute(unwrap(options.target), params);\r\n}\r\n\r\nregisterActions({ route });"]}